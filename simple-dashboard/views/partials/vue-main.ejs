<script type="text/javascript">

  const app = new Vue({
    el: '#app',
    data: {
      sitemapValue: {name: "Choose a sitemap"},
      sitemapOptions: [{
        name: "Choose a sitemap"
      }],
      pageViews: 13400,
      contentTypes: 30,
      formTypes: 15,
      statusCodes: 3,
      languages: 1
    },
    created () {
      fetch('/results').then(resp => resp.json()).then(json => {
        let obj = {}
        for (var i = 0; i < json.length; i++) {
          obj[i] = {
            name: json[i]
          }
        }
        this.sitemapOptions = obj
        this.sitemapValue = obj[0]
      })
    },
    methods: {
      createChart(id, data, options) {
        let defaultData = google.visualization.arrayToDataTable([
          ['City', '2010 Population', '2000 Population'],
          ['New York City, NY', 8175000, 8008000],
          ['Los Angeles, CA', 3792000, 3694000],
          ['Chicago, IL', 2695000, 2896000],
          ['Houston, TX', 2099000, 1953000],
          ['Philadelphia, PA', 1526000, 1517000]
        ])

        var data = google.visualization.arrayToDataTable(data) || defaultData;

        var options = options || {
          title: 'Population of Largest U.S. Cities',
          chartArea: {width: '50%'},
          hAxis: {
            title: 'Total Population',
            minValue: 0
          },
          vAxis: {
            title: 'City'
          }
        };
        var chart = new google.visualization.BarChart(document.getElementById(id));
        chart.draw(data, options);
      },
    },
    mounted () {
      google.charts.load('current', {packages: ['corechart', 'bar']});
      google.charts.setOnLoadCallback(this.createChart());
    }
  });

</script>
